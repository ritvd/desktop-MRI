# desktop-MRI
dMRI is the first open-source simulator built to help teaching the concepts of MR physics.

| Package     | Version |
|-------------|---------|
| Python      | 3.10.6  |
| PySimpleGUI | 4.60.4  |
| NumPy       | 1.21.5  |
| OpenCV      | 4.5.4   |

## Layout of dMRI

dMRI graphical user interface is organized into five panels.

**A. User Input Panel:**
Displays all the important user adjustable parameters that are available on a clinical MR scanner 

The parameters are organized into four tabs:  
  1. Localization parameters: Parameters that determine the location and dimensions of the reconstructed slices.
  2. Acquisition parameters: Parameters that determine the location and dimensions of the voxels constituting the reconstructed slices, k-Space trajectory employed for       data collection and number of signal averages.
  3. Contrast parameters: Parameters that determine the voxel signal intensities in reconstructed slices. These include the pulse sequence and parameters such as Flip      angle, TR, TE, Inversion time and bandwidth.
  4. Additional parameters: Additional k-Space strategy related parameters, choice of artifacts and image filters that can be introduced into the reconstructed image         are listed in this tab. It also contains sliders to control the magnitude or location of some of these parameters see ‘Steps of dMRI image reconstruction’ below       for details of the parameters in the user input panel.
  
**B. Output Panel:**
Displays the images output and numerical results of the simulation. It has three tabs:

  1. Reconstructed Image: Sliders are available to sroll through the reconstructed images and to adjust the brightness and contrast in the images
  2. Magnified Image: Centre of the reconstructed image is magnified and displayed so as to demonstrate finer details such as spatial resolution, partial volume              artifacts, truncation artifacts etc
   3. Summary of Parameters: The user defined parameters utilized during the simulation, the calculated signal to noise ratio and calculated scan time are displayed

**C. Control Panel**

  1. Run button: To run the simulation employing the user defined parameters
  2. Reset button: To reset the user defined parameters to default values
  3. Quit button

**D. Physics Panel**
Displays the MR physics concepts behind the simulation. It has four tabs:

  1. Pulse Sequence Diagram: Displays the pulse sequence diagram, depicting the radiofrequency pulses, slice selection, phase encoding, frequency encoding gradients          and signal output 
  2. Relaxation Curves: Displays the T1 and T2 relaxation curves for the four major tissues (CSF, grey matter, white matter and fat) and explains the T1 and T2               contributions to the signal generated by the current user defined parameters
  3. k-Space Trajectory: Displays the k-Space filling trajectory for the employed data collection mechanism 
  4. k-Space Display: Displays the k-Space representation of the image generated by the current user defined parameters and additional k-Space strategies 

**E. Message Panel**
Displays relevant messages on use of sliders when applicable (acts as an inbult help window)

##Functional Overview of dMRI

**Steps of dMRI image reconstruction**
  1. A 3D anatomical array of T1, T2 and proton density maps is loaded. This array has been computed from a 3D T1 MR acquisition from a single subject.
  2. Slices are sampled and voxel data is computed from the 3D anatomical array, using user defined parameters such as ‘plane of acquisition’, ‘slice parameters’,          ‘image offset’, ‘field of view’ and ‘acquisition matrix’
      The parameters that can be adjusted are:
      A. Plane of Acquisition
        i. Axial 
        ii. Coronal
        iii. Sagittal
      B. Slice Parameters
        i. Number of slices: 1 - 30 slices
        ii. Slice thickness: 1 - 5mm (in 1mm increments)
        iii. Interslice gaps: 0 - 2mm (in 0.5mm increments)
  3. Image offset
      a. A-P Axis: Shifts the centre of field of view along the antero - posterior axis
      b. R-L Axis: Shifts the centre of field of view along the right - left axis
      c. H-F Axis: Shifts the centre of field of view along the head - foot axis
  4. Field of View: 50 - 300mm (in 10mm increments)
  5. Acquisition matrix
  6. Frequency encoding steps: 64 - 512 (in 8 step increments) 
  7. Phase encoding steps: 64 - 512 (in 8 step increments)




